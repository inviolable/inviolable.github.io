
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8">
  <title></title> 
 <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
  <style>
  .a:hover{
  color:red;
  }
  </style>
 <script>
function getLocation() {
  if (navigator.geolocation) { // GPS를 지원하면
    navigator.geolocation.getCurrentPosition(function(position) {
     
   var geo = "위도 : " + position.coords.latitude + "<br>"
   geo += "경도 : " + position.coords.longitude + "<br>";
    
 const lat = position.coords.latitude;
 const lon = position.coords.longitude;
 const API_KEY = "6b3ad30bef0bf289dac86b995c79cf58";
  $("#geo").html(geo);
     
  const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric&lang=kr`;
  fetch(url).then(response => response.json()).then(data => displayGeo(data));

      //alert(position.coords.latitude + ' ' + position.coords.longitude);
    }, function(error) {
      console.error(error);
    }, {
      enableHighAccuracy: false,
      maximumAge: 0,
      timeout: Infinity
    });
  } else {
    alert('GPS를 지원하지 않습니다');
  }
}

function displayGeo(data){
  const geodata = `기온 : ${data.main.temp}, 지역 : ${data.name}`;
  $("#geo2").html(geodata);
}


 </script>
</head>
 
<body>
  <button onclick="getLocation();">위치</button>
  <p id="geo"></p>
  <p id="geo2"></p>
</body>
</html>